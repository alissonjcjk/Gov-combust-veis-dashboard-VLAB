<!-- Implementa a visao/template do dashboard -->

<div class="py-6" *ngIf="stats$ | async as stats">

  <nav class="br-breadcrumb mb-6" aria-label="Breadcrumbs">
    <ul class="crumb-list">
      <li class="crumb">
        <a [routerLink]="['/']" class="home-link">
          <svg width="20" height="23" viewBox="0 0 20 23" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9.75 8.65625C9.8125 8.59375 9.90625 8.5625 10 8.5625C10.0625 8.5625 10.1562 8.59375 10.2188 8.65625L16 13.375V18.5C16 18.7812 15.75 19 15.5 19H11.9688C11.7188 19 11.4688 18.7812 11.4688 18.5V15.5C11.4688 15.25 11.25 15 10.9688 15H8.96875C8.71875 15 8.46875 15.25 8.46875 15.5V18.5C8.46875 18.7812 8.25 19 8 19H4.5C4.21875 19 4 18.7812 4 18.5V13.4062L9.75 8.65625ZM18.8438 11.875C18.9375 11.9375 19 12.0625 19 12.1562C19 12.25 18.9688 12.3438 18.9062 12.4062L18.0938 13.375C18.0312 13.4688 17.9375 13.5 17.8125 13.5C17.7188 13.5 17.625 13.4688 17.5625 13.4062L10.2188 7.375C10.1562 7.3125 10.0625 7.28125 10 7.28125C9.90625 7.28125 9.8125 7.3125 9.75 7.375L2.40625 13.4062C2.34375 13.4688 2.25 13.5 2.15625 13.5C2.03125 13.5 1.9375 13.4688 1.875 13.375L1.0625 12.4062C1.03125 12.3438 0.96875 12.25 0.96875 12.1562C0.96875 12.0625 1.03125 11.9375 1.125 11.875L9.03125 5.34375C9.28125 5.15625 9.625 5.03125 10 5.03125C10.3438 5.03125 10.6875 5.15625 10.9375 5.34375L13.75 7.65625V5.40625C13.75 5.1875 13.9062 5.03125 14.125 5.03125H15.875C16.0625 5.03125 16.25 5.1875 16.25 5.40625V9.71875L18.8438 11.875Z" fill="#1351B4"/>
          </svg>
        </a>
      </li>
      <li class="crumb active">
        <span class="chevron">></span>
        <span>Dashboard</span>
      </li>
    </ul>
  </nav>
  <h2 class="text-2xl font-bold text-gov-blue-primary mb-6">Visão Geral</h2>
  
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <div class="bg-white p-6 rounded-lg shadow-sm border-l-8 border-gov-blue-primary">
      <p class="text-sm text-gray-500 font-bold uppercase">Preço Médio Nacional</p>
      <p class="text-3xl font-black text-gov-blue-primary">
        {{ stats.precoMedioNacional | currency:'BRL' }}
      </p>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-sm border-l-8 border-gov-yellow">
      <p class="text-sm text-gray-500 font-bold uppercase">Total Consumido (Litros)</p>
      <p class="text-3xl font-black text-gray-800">
        {{ stats.totalConsumido | number }} L
      </p>
    </div>

    <div class="bg-white p-6 rounded-lg shadow-sm border-l-8 border-green-600">
      <p class="text-sm text-gray-500 font-bold uppercase">Postos Monitorados</p>
      <p class="text-3xl font-black text-gray-800">
        {{ stats.postosAtivos }}
      </p>
    </div>
  </div>
  <div class="mt-8">
  <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-100">

      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mt-8">
  
        <div class="bg-white p-6 rounded-lg shadow border border-gray-200">
          <h3 class="text-gov-blue-primary font-bold uppercase text-sm mb-4">
            Evolução de Preço (Últimos 6 Meses)
          </h3>

          <div class="relative w-full h-96">
            <canvas
              baseChart
              [data]="lineChartData"
              [options]="lineChartOptions"
              [type]="'line'">
            </canvas>
          </div>
        </div>

        <div class="bg-white p-6 rounded-lg shadow border border-gray-200">
          <h3 class="text-gov-blue-primary font-bold uppercase text-sm mb-4">
            Distribuição de Consumo por Regional
          </h3>

          <div class="relative w-full h-96">
            <canvas
              baseChart
              [data]="barChartData"
              [options]="barChartOptions"
              [type]="barChartType">
            </canvas>
          </div>
        </div>

      </div>


  </div>

</div>