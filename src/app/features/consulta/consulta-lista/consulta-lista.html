<div class="py-6 animate-fade-in">
  <h2 class="text-2xl font-bold text-gov-blue-primary mb-6 uppercase tracking-wider">
    Consulta de Abastecimentos
  </h2>

  <div class="bg-gray-50 p-6 rounded-t-lg border border-gray-200 border-b-0">
    <form class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">

      <!-- Busca -->
      <div class="lg:col-span-2">
        <label class="block text-sm font-bold text-gray-700 mb-1">
          Motorista ou Placa
        </label>
        <div class="relative">
          <input
            type="text"
            [formControl]="searchControl"
            placeholder="Ex: Carlos Andrade ou BRA-2E19..."
            class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 shadow-sm"
          />
          <span class="absolute left-3 top-2.5 text-gray-400">
            üîç
          </span>
        </div>
      </div>

      <!-- UF -->
      <div>
        <label class="block text-sm font-bold text-gray-700 mb-1">
          Estado (UF)
        </label>
        <select
          [formControl]="ufControl"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 shadow-sm"
        >
          <option value="">Todos</option>
          <option *ngFor="let uf of ufs" [value]="uf">
            {{ uf }}
          </option>
        </select>
      </div>

      <!-- Combust√≠vel -->
      <div>
        <label class="block text-sm font-bold text-gray-700 mb-1">
          Combust√≠vel
        </label>
        <select
          [formControl]="combustivelControl"
          class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 shadow-sm"
        >
          <option value="">Todos</option>
          <option value="Gasolina">Gasolina</option>
          <option value="Etanol">Etanol</option>
          <option value="Diesel">Diesel</option>
        </select>
      </div>

      <!-- Per√≠odo -->
      <div>
        <label class="block text-sm font-bold text-gray-700 mb-1">
          Per√≠odo
        </label>
        <div class="flex gap-2">
          <input
            type="date"
            [formControl]="dataInicioControl"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 shadow-sm"
          />
          <input
            type="date"
            [formControl]="dataFimControl"
            class="w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500 shadow-sm"
          />
        </div>
      </div>

    </form>
  </div>


  <div class="overflow-x-auto bg-white rounded-b-lg shadow-sm border border-gray-200">
    <table class="min-w-full divide-y divide-gray-200">
      <thead class="bg-gray-50">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase">Data</th>
          <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase">Posto</th>
          <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase">Cidade/UF</th>
          <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase">Tipo de Combust√≠vel</th>
          <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase">Valor litro</th>
          <th class="px-6 py-3 text-left text-xs font-bold text-gray-500 uppercase text-right">Total pago (R$)</th>
          <th class="px-6 py-3 text-center text-xs font-bold text-gray-500 uppercase">A√ß√µes</th>
        </tr>
      </thead>
      
      <tbody class="divide-y divide-gray-200 bg-white" *ngIf="abastecimentosFiltrados$ | async as lista">
        <tr *ngFor="let item of lista" class="hover:bg-blue-50 transition-colors">
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-700">
            {{ item.data | date:'dd/MM/yyyy' }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
            {{ item.posto }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
            {{ item.cidade }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
            <span class="px-2 py-1 rounded-full text-xs font-bold" 
                  [ngClass]="{
                    'bg-green-100 text-green-800': item.combustivel === 'Etanol', 
                    'bg-blue-100 text-blue-800': item.combustivel === 'Gasolina',
                    'bg-amber-100 text-amber-800': item.combustivel === 'Diesel'
                  }">
              {{ item.combustivel }}
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
            {{ item.valorLitro }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-gov-blue-primary text-right">
            {{ item.totalPago | currency:'BRL' }}
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-center">
            <button [routerLink]="['/consulta', item.id]"
                     class="text-gov-blue-primary hover:underline font-bold text-xs">
                     DETALHES 
            </button>
          </td>
        </tr>

        <tr *ngIf="lista.length === 0">
          <td colspan="6" class="px-6 py-10 text-center text-gray-500 italic">
            Nenhum abastecimento encontrado para esta busca.
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>